{"ast":null,"code":"import { createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"employee-view\"\n};\nconst _hoisted_2 = {\n  class: \"content-grid mt-5\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"Navbar\"]), _createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" Siphokazi \"), _createCommentVNode(\" <h1 class=\\\"text-center\\\"><i>Attendance Records</i></h1>\\r\\n    <table class=\\\"attendance-table\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th>Employee ID</th>\\r\\n          <th>Name</th>\\r\\n          <th v-for=\\\"date in uniqueDates\\\" :key=\\\"date\\\">{{ date }}</th>\\r\\n          <th>Leave Request</th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody v-if=\\\"attendanceAndLeave.length\\\">\\r\\n        <tr v-for=\\\"record in attendanceAndLeave\\\" :key=\\\"record.employeeId\\\">\\r\\n          <td>{{ record.employeeId }}</td>\\r\\n          <td>{{ record.name }}</td>\\r\\n          <td v-for=\\\"date in uniqueDates\\\" :key=\\\"record.employeeId + date\\\">\\r\\n            <span v-if=\\\"getStatusByDate(record.attendance, date)\\\">\\r\\n              {{ getStatusByDate(record.attendance, date) }}\\r\\n            </span>\\r\\n            <span v-else>-</span>\\r\\n          </td>\\r\\n          <td>\\r\\n            <span v-if=\\\"record.leaveRequests && record.leaveRequests.length\\\">\\r\\n              <span\\r\\n                :style=\\\"{\\r\\n                  color: getLeaveColor(record.leaveRequests[0].status),\\r\\n                }\\\"\\r\\n              >\\r\\n                {{ record.leaveRequests[0].status }} -\\r\\n                {{ record.leaveRequests[0].reason }}\\r\\n              </span>\\r\\n            </span>\\r\\n            <button v-else @click=\\\"submitLeaveRequest(record)\\\">\\r\\n              Request Leave\\r\\n            </button>\\r\\n          </td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n    </table> \"), _createCommentVNode(\" Aisha \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"EmployeeComp\"], {\n    employees: $setup.employees,\n    onRequestSubmitted: $setup.handleNewRequest\n  }, null, 8 /* PROPS */, [\"employees\"]), _createVNode($setup[\"AttendanceComp\"], {\n    employees: $setup.employees,\n    class: \"attendance-display\"\n  }, null, 8 /* PROPS */, [\"employees\"])])]), _cache[0] || (_cache[0] = _createElementVNode(\"footer\", null, null, -1 /* CACHED */))], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createVNode","$setup","_createElementVNode","_hoisted_1","_createCommentVNode","_hoisted_2","employees","onRequestSubmitted","handleNewRequest"],"sources":["C:\\Users\\Student\\project2_\\ModernTech_Solutions\\frontend\\src\\views\\EmployeeViews.vue"],"sourcesContent":["<template>\r\n  <Navbar />\r\n  <div class=\"employee-view\">\r\n    <!-- Siphokazi -->\r\n    <!-- <h1 class=\"text-center\"><i>Attendance Records</i></h1>\r\n    <table class=\"attendance-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Employee ID</th>\r\n          <th>Name</th>\r\n          <th v-for=\"date in uniqueDates\" :key=\"date\">{{ date }}</th>\r\n          <th>Leave Request</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"attendanceAndLeave.length\">\r\n        <tr v-for=\"record in attendanceAndLeave\" :key=\"record.employeeId\">\r\n          <td>{{ record.employeeId }}</td>\r\n          <td>{{ record.name }}</td>\r\n          <td v-for=\"date in uniqueDates\" :key=\"record.employeeId + date\">\r\n            <span v-if=\"getStatusByDate(record.attendance, date)\">\r\n              {{ getStatusByDate(record.attendance, date) }}\r\n            </span>\r\n            <span v-else>-</span>\r\n          </td>\r\n          <td>\r\n            <span v-if=\"record.leaveRequests && record.leaveRequests.length\">\r\n              <span\r\n                :style=\"{\r\n                  color: getLeaveColor(record.leaveRequests[0].status),\r\n                }\"\r\n              >\r\n                {{ record.leaveRequests[0].status }} -\r\n                {{ record.leaveRequests[0].reason }}\r\n              </span>\r\n            </span>\r\n            <button v-else @click=\"submitLeaveRequest(record)\">\r\n              Request Leave\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table> -->\r\n\r\n    <!-- Aisha -->\r\n\r\n    <div class=\"content-grid mt-5\">\r\n      <EmployeeComp\r\n        :employees=\"employees\"\r\n        @request-submitted=\"handleNewRequest\"\r\n      />\r\n\r\n      <AttendanceComp :employees=\"employees\" class=\"attendance-display\" />\r\n    </div>\r\n  </div>\r\n  <footer />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport Navbar from \"@/components/Navbar.vue\";\r\nimport Footer from \"@/components/Footer.vue\";\r\nimport EmployeeComp from \"@/components/EmployeeComp.vue\";\r\nimport AttendanceComp from \"@/components/AttendanceComp.vue\";\r\n\r\n\r\n// Employees data for Aisha's section\r\nconst employees = ref([\r\n  {\r\n    employeeId: 1,\r\n    name: \"Sibongile Nkosi\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Present\" },\r\n      { date: \"2025-07-26\", status: \"Absent\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2025-07-22\", reason: \"Sick Leave\", status: \"Approved\" },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 2,\r\n    name: \"Lungile Moyo\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Present\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      {\r\n        date: \"2025-07-15\",\r\n        reason: \"Family Responsibility\",\r\n        status: \"Denied\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 3,\r\n    name: \"Thabo Molefe\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Present\" },\r\n      { date: \"2025-07-26\", status: \"Absent\" },\r\n    ],\r\n    leaveRequests: [\r\n      {\r\n        date: \"2025-07-10\",\r\n        reason: \"Medical Appointment\",\r\n        status: \"Approved\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 4,\r\n    name: \"Keshav Naidoo\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Present\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2025-07-20\", reason: \"Bereavement\", status: \"Approved\" },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 5,\r\n    name: \"Zanele Khumalo\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Absent\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2024-12-01\", reason: \"Childcare\", status: \"Pending\" },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 6,\r\n    name: \"Sipho Zulu\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Absent\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2025-07-18\", reason: \"Sick Leave\", status: \"Approved\" },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 7,\r\n    name: \"Naledi Moeketsi\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Absent\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2025-07-22\", reason: \"Vacation\", status: \"Pending\" },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 8,\r\n    name: \"Farai Gumbo\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Absent\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      {\r\n        date: \"2025-07-18\",\r\n        reason: \"Medical Appointment\",\r\n        status: \"Approved\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 9,\r\n    name: \"Karabo Dlamini\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Absent\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2025-07-19\", reason: \"Childcare\", status: \"Denied\" },\r\n    ],\r\n  },\r\n  {\r\n    employeeId: 10,\r\n    name: \"Fatima Patel\",\r\n    attendance: [\r\n      { date: \"2025-07-25\", status: \"Absent\" },\r\n      { date: \"2025-07-26\", status: \"Present\" },\r\n    ],\r\n    leaveRequests: [\r\n      { date: \"2024-12-03\", reason: \"Childcare\", status: \"Pending\" },\r\n    ],\r\n  },\r\n]);\r\n\r\nconst handleNewRequest = (request) => {\r\n  const employee = employees.value.find(\r\n    (emp) => emp.employeeId == request.employeeId\r\n  );\r\n  if (employee) {\r\n    employee.leaveRequests.push({\r\n      date: request.date,\r\n      reason: request.reason,\r\n      status: \"Pending\",\r\n    });\r\n  }\r\n};\r\n\r\n// Siphokazi's code\r\nconst attendanceAndLeave = ref([]);\r\n\r\nconst uniqueDates = computed(() => {\r\n  if (!Array.isArray(attendanceAndLeave.value)) return [];\r\n  const dateSet = new Set();\r\n  attendanceAndLeave.value.forEach((record) => {\r\n    if (Array.isArray(record.attendance)) {\r\n      record.attendance.forEach((entry) => {\r\n        if (entry.date) dateSet.add(entry.date);\r\n      });\r\n    }\r\n  });\r\n  return Array.from(dateSet).sort();\r\n});\r\n\r\nfunction getStatusByDate(attendanceArray, date) {\r\n  const entry = attendanceArray.find((a) => a.date === date);\r\n  return entry ? entry.status : null;\r\n}\r\n\r\nfunction getAttendanceRecord(status) {\r\n  if (status === \"Present\") return \"Present\";\r\n  if (status === \"Absent\") return \"Absent\";\r\n  return \"status\";\r\n}\r\n\r\nfunction getLeaveColor(status) {\r\n  switch (status) {\r\n    case \"Approved\":\r\n      return \"green\";\r\n    case \"Denied\":\r\n      return \"red\";\r\n    case \"Pending\":\r\n      return \"orange\";\r\n    default:\r\n      return \"black\";\r\n  }\r\n}\r\n\r\nfunction submitLeaveRequest(record) {\r\n  alert(`Leave request Submitted for ${record.name}`);\r\n}\r\n\r\nasync function fetchAttendanceData() {\r\n  try {\r\n    const response = await fetch(\"/attendance.json\");\r\n    const data = await response.json();\r\n\r\n    if (!Array.isArray(data.attendanceAndLeave)) {\r\n      console.error(\"ðŸ˜’expected array but got\", data);\r\n    }\r\n\r\n    attendanceAndLeave.value = data.attendanceAndLeave;\r\n    console.log(\"âœ…\", attendanceAndLeave.value);\r\n  } catch {\r\n    console.error(\"Error fetching attendance data\");\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchAttendanceData();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.employee-view {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.employee-form h1 {\r\n  color: #2199ea !important;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\nh1 h2 h3 h4 {\r\n  color: #2199ea !important;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n.content-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 30px;\r\n}\r\n\r\n.content-grid > *:first-child {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.content-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n}\r\n\r\n.attendance-display {\r\n  background-color: #eeeeee;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Siphokazi\r\n.attendance-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n  font-family: \"Segoe UI\", sans-serif;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.attendance-table th {\r\n  background-color: #2d3e50;\r\n  color: #ffffff;\r\n  text-align: center;\r\n  justify-content: center;\r\n  padding: 12px;\r\n}\r\n\r\n.attendance-table td {\r\n  padding: 12px;\r\n  text-align: center;\r\n  justify-content: center;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.attendance-table tr:nth-child(even) {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.attendance-display {\r\n  min-width: 400px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.attendance-table td {\r\n  padding: 12px;\r\n  text-align: center;\r\n  justify-content: center;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  vertical-align: middle;\r\n}\r\n\r\n\r\n\r\n.attendance-table tr:hover {\r\n  background-color: #f1f7ff;\r\n}\r\n\r\n.attendance-table td button {\r\n  padding: 6px 10px;\r\n  background-color: #0078d4;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.attendance-table td button:hover {\r\n  background-color: #005ea2;\r\n}\r\n\r\n.attendance-table td span {\r\n  font-weight: 500;\r\n} */\r\n</style>\r\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAe;;EA2CnBA,KAAK,EAAC;AAAmB;;6DA5ChCC,YAAA,CAAUC,MAAA,aACVC,mBAAA,CAmDM,OAnDNC,UAmDM,GAlDJC,mBAAA,eAAkB,EAClBA,mBAAA,m9CAqCY,EAEZA,mBAAA,WAAc,EAEdF,mBAAA,CAOM,OAPNG,UAOM,GANJL,YAAA,CAGEC,MAAA;IAFCK,SAAS,EAAEL,MAAA,CAAAK,SAAS;IACpBC,kBAAiB,EAAEN,MAAA,CAAAO;0CAGtBR,YAAA,CAAoEC,MAAA;IAAnDK,SAAS,EAAEL,MAAA,CAAAK,SAAS;IAAEP,KAAK,EAAC;wEAGjDG,mBAAA,CAAU,wC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}